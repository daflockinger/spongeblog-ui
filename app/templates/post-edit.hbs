<style>
.modal {
   width: 90% !important ;
   max-height: 90% !important
}
</style>

{{admin-navigation}}
<div class="container center-align">
{{#with model.post as |post|}}
  <div class="row">
    <div class="col s12">
        <h2>{{#if model.isNewPost}}Create{{else}}Edit{{/if}} Post</h2>
    </div>
  </div>
  <div class="row">
    <div class="col s12">
      {{#if model.isNewPost}}
        {{md-input value=post.title label='Title' validate=true}}
      {{else}}
        {{md-input readonly=true value=post.title label='Title' validate=true}}
      {{/if}}
    </div>
  </div>
  <div class="row left-align">
      <div class="col s12 l6 m6">
    {{md-select content=model.categories
        value=post.category
        label="Category"
        prompt="Please choose..."
        optionLabelPath="content.name"
        optionValuePath="content.name"
        class="col s12 l12 m12"}}
        {{md-select value=post.postStatus
            label="Status"
            content=model.postStatuses
            class="col col s12 m12 l12"}}
        <div class="col s12 l12 m12 left-align">
          {{md-check name="No Post" checked=post.noPost}}
        </div>
      </div>
   <div class="col s12 l6 m6">
      <label>Keywords</label>
      <div style="max-height:200px;overflow-y: scroll;">
    {{md-checks
        selection=post.keywords
        content=model.keywords
        optionValuePath='content.name'
        optionLabelPath='content.name'}}
      </div>
    </div>
  </div>
  <div class="row">
      <div class="card col s12 m12 l12 left-align">

        {{trumbowyg-editor btns=model.btns html=post.content.content}}
        <div class="card-action">
          {{#if model.isNewPost}}
          <button class="btn waves-effect waves-light col offset-s5 s2" type="button"
            {{action "insert" post on="mouseUp"}}>Create<i class="fa fa-floppy-o right" aria-hidden="true"></i>
          </button>
          {{else}}
          <button class="btn waves-effect waves-light col offset-s5 s2" type="button"
            {{action "save" post on="mouseUp"}}>Save<i class="fa fa-floppy-o right" aria-hidden="true"></i>
          </button>
          {{/if}}
          {{md-btn action=toggleModal
                   text="Open preview"
                   action='toggleModal' style="right"}}
        </div>
    </div>
  </div>
{{/with}}
</div>
{{!-- The Modal --}}
{{#if isModalShown}}
  {{#md-modal close='toggleModal'
              class="test-modal"}}

    {{!-- The body of the modal --}}
    <div class="modal-content">
      {{post-preview post=model.post}}
    </div>

    {{!-- The actions at the bottom of the modal --}}
    <div class="modal-footer">
      {{!-- Modal's Cancel Button --}}
      <a class="modal-action
                modal-close
                waves-effect
                waves-green
                btn-flat
                cancel-button"
          {{action 'toggleModal'}}>
        Close
      </a>
    </div> {{!-- .modal-footer --}}
  {{/md-modal}}
{{/if}}
